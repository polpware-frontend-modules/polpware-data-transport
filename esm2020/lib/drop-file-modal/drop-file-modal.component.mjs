import { Component, Input } from '@angular/core';
import { ObservableModalAbstractComponent } from '@polpware/bs-components';
import { faSave } from '@fortawesome/free-solid-svg-icons';
import * as i0 from "@angular/core";
import * as i1 from "ngx-bootstrap/modal";
import * as i2 from "ngx-dropzone";
import * as i3 from "@fortawesome/angular-fontawesome";
import * as i4 from "@polpware/modal-directives";
import * as i5 from "@angular/common";
export class DropFileModalComponent extends ObservableModalAbstractComponent {
    constructor(bsModalRef, bsModalService) {
        super();
        this.bsModalRef = bsModalRef;
        this.bsModalService = bsModalService;
        this.faSave = faSave;
        this.items = [];
        this.valid = false;
        this.title = 'Select a file';
        this.multiple = false;
        this.accept = '*';
        this.maxFileSizeInBytes = undefined;
    }
    ngOnInit() {
    }
    onSelect(event) {
        this.items.push(...event.addedFiles);
        this.valid = true;
    }
    onRemove(event) {
        this.items.splice(this.items.indexOf(event), 1);
        this.valid = false;
    }
    confirm() {
        this.closeModal(this.items);
    }
    close() {
        this.closeModal(null);
    }
}
DropFileModalComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.12", ngImport: i0, type: DropFileModalComponent, deps: [{ token: i1.BsModalRef }, { token: i1.BsModalService }], target: i0.ɵɵFactoryTarget.Component });
DropFileModalComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.12", type: DropFileModalComponent, selector: "polp-drop-file-modal", inputs: { multiple: "multiple", accept: "accept", maxFileSizeInBytes: "maxFileSizeInBytes" }, usesInheritance: true, ngImport: i0, template: "<div class=\"modal-header\" polpModalDraggable>\n    <h4 class=\"modal-title\">{{title}}</h4>\n    <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" (click)=\"close()\">\n    </button>\n</div>\n<div class=\"modal-body\">\n    <ngx-dropzone [multiple]=\"multiple\"\n                  [accept]=\"accept\"\n                  [maxFileSize]=\"maxFileSizeInBytes\"\n                  (change)=\"onSelect($event)\">        \n        <ngx-dropzone-label>Drop a file</ngx-dropzone-label>\n        <ngx-dropzone-preview *ngFor=\"let f of items\" [removable]=\"true\" (removed)=\"onRemove(f)\">\n\t    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>\n        </ngx-dropzone-preview>\n    </ngx-dropzone>\n</div>\n\n<div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"close()\">Cancel</button>\n    <button class=\"btn btn-primary\" (click)=\"confirm()\" [disabled]=\"!valid\">\n        <fa-icon [icon]=\"faSave\" class=\"me-1\"></fa-icon> <span>Confirm</span>\n    </button>\n</div>\n", styles: [""], components: [{ type: i2.NgxDropzoneComponent, selector: "ngx-dropzone, [ngx-dropzone]", inputs: ["accept", "disabled", "multiple", "maxFileSize", "expandable", "disableClick", "processDirectoryDrop", "id", "aria-label", "aria-labelledby", "aria-describedby"], outputs: ["change"] }, { type: i2.NgxDropzonePreviewComponent, selector: "ngx-dropzone-preview", inputs: ["file", "removable"], outputs: ["removed"] }, { type: i3.FaIconComponent, selector: "fa-icon", inputs: ["icon", "title", "spin", "pulse", "mask", "styles", "flip", "size", "pull", "border", "inverse", "symbol", "rotate", "fixedWidth", "classes", "transform", "a11yRole"] }], directives: [{ type: i4.polpModalDraggableDirective, selector: "[polpModalDraggable]" }, { type: i2.NgxDropzoneLabelDirective, selector: "ngx-dropzone-label" }, { type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.12", ngImport: i0, type: DropFileModalComponent, decorators: [{
            type: Component,
            args: [{ selector: 'polp-drop-file-modal', template: "<div class=\"modal-header\" polpModalDraggable>\n    <h4 class=\"modal-title\">{{title}}</h4>\n    <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" (click)=\"close()\">\n    </button>\n</div>\n<div class=\"modal-body\">\n    <ngx-dropzone [multiple]=\"multiple\"\n                  [accept]=\"accept\"\n                  [maxFileSize]=\"maxFileSizeInBytes\"\n                  (change)=\"onSelect($event)\">        \n        <ngx-dropzone-label>Drop a file</ngx-dropzone-label>\n        <ngx-dropzone-preview *ngFor=\"let f of items\" [removable]=\"true\" (removed)=\"onRemove(f)\">\n\t    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>\n        </ngx-dropzone-preview>\n    </ngx-dropzone>\n</div>\n\n<div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"close()\">Cancel</button>\n    <button class=\"btn btn-primary\" (click)=\"confirm()\" [disabled]=\"!valid\">\n        <fa-icon [icon]=\"faSave\" class=\"me-1\"></fa-icon> <span>Confirm</span>\n    </button>\n</div>\n", styles: [""] }]
        }], ctorParameters: function () { return [{ type: i1.BsModalRef }, { type: i1.BsModalService }]; }, propDecorators: { multiple: [{
                type: Input
            }], accept: [{
                type: Input
            }], maxFileSizeInBytes: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcC1maWxlLW1vZGFsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BvbHB3YXJlL2RhdGEtdHJhbnNwb3J0L3NyYy9saWIvZHJvcC1maWxlLW1vZGFsL2Ryb3AtZmlsZS1tb2RhbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wb2xwd2FyZS9kYXRhLXRyYW5zcG9ydC9zcmMvbGliL2Ryb3AtZmlsZS1tb2RhbC9kcm9wLWZpbGUtbW9kYWwuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFM0UsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLG1DQUFtQyxDQUFDOzs7Ozs7O0FBYzNELE1BQU0sT0FBTyxzQkFDVCxTQUFRLGdDQUFxRDtJQWdCN0QsWUFDb0IsVUFBc0IsRUFDbkIsY0FBOEI7UUFFakQsS0FBSyxFQUFFLENBQUM7UUFIUSxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ25CLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQWZyRCxXQUFNLEdBQUcsTUFBTSxDQUFDO1FBRWhCLFVBQUssR0FBVyxFQUFFLENBQUM7UUFDbkIsVUFBSyxHQUFZLEtBQUssQ0FBQztRQUN2QixVQUFLLEdBQUcsZUFBZSxDQUFDO1FBR3hCLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFFMUIsV0FBTSxHQUFXLEdBQUcsQ0FBQztRQUVyQix1QkFBa0IsR0FBVyxTQUFTLENBQUM7SUFPdkMsQ0FBQztJQUVELFFBQVE7SUFDUixDQUFDO0lBRUQsUUFBUSxDQUFDLEtBQTZCO1FBQ2xDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxRQUFRLENBQUMsS0FBVztRQUNoQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDO0lBRUQsT0FBTztRQUNILElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxLQUFLO1FBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQixDQUFDOztvSEEzQ1Esc0JBQXNCO3dHQUF0QixzQkFBc0IsaUxDakJuQywraENBdUJBOzRGRE5hLHNCQUFzQjtrQkFMbEMsU0FBUzsrQkFDSSxzQkFBc0I7OEhBZWhDLFFBQVE7c0JBRFAsS0FBSztnQkFHTixNQUFNO3NCQURMLEtBQUs7Z0JBR04sa0JBQWtCO3NCQURqQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlTW9kYWxBYnN0cmFjdENvbXBvbmVudCB9IGZyb20gJ0Bwb2xwd2FyZS9icy1jb21wb25lbnRzJztcbmltcG9ydCB7IEJzTW9kYWxSZWYsIEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnbmd4LWJvb3RzdHJhcC9tb2RhbCc7XG5pbXBvcnQgeyBmYVNhdmUgfSBmcm9tICdAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnMnO1xuXG4vLyB0b2RvOiBDb25maWd1cmF0aW9uIFxuZXhwb3J0IGludGVyZmFjZSBJTW9kYWxJbnB1dCB7XG4gICAgbXVsdGlwbGU/OiBib29sZWFuO1xuICAgIGFjY2VwdD86IHN0cmluZztcbiAgICBtYXhGaWxlU2l6ZUluQnl0ZXM/OiBudW1iZXI7IC8vIGJ5ZXRzXG59XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAncG9scC1kcm9wLWZpbGUtbW9kYWwnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9kcm9wLWZpbGUtbW9kYWwuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2Ryb3AtZmlsZS1tb2RhbC5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgRHJvcEZpbGVNb2RhbENvbXBvbmVudFxuICAgIGV4dGVuZHMgT2JzZXJ2YWJsZU1vZGFsQWJzdHJhY3RDb21wb25lbnQ8SU1vZGFsSW5wdXQsIEZpbGVbXT5cbiAgICBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBmYVNhdmUgPSBmYVNhdmU7XG5cbiAgICBpdGVtczogRmlsZVtdID0gW107XG4gICAgdmFsaWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB0aXRsZSA9ICdTZWxlY3QgYSBmaWxlJztcblxuICAgIEBJbnB1dCgpXG4gICAgbXVsdGlwbGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBASW5wdXQoKVxuICAgIGFjY2VwdDogc3RyaW5nID0gJyonO1xuICAgIEBJbnB1dCgpXG4gICAgbWF4RmlsZVNpemVJbkJ5dGVzOiBudW1iZXIgPSB1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGJzTW9kYWxSZWY6IEJzTW9kYWxSZWYsXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBic01vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB9XG5cbiAgICBvblNlbGVjdChldmVudDogeyBhZGRlZEZpbGVzOiBGaWxlW10gfSkge1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2goLi4uZXZlbnQuYWRkZWRGaWxlcyk7XG4gICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlKGV2ZW50OiBGaWxlKSB7XG4gICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKHRoaXMuaXRlbXMuaW5kZXhPZihldmVudCksIDEpO1xuICAgICAgICB0aGlzLnZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uZmlybSgpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKHRoaXMuaXRlbXMpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsb3NlTW9kYWwobnVsbCk7XG4gICAgfVxuXG59XG4iLCI8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCIgcG9scE1vZGFsRHJhZ2dhYmxlPlxuICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+e3t0aXRsZX19PC9oND5cbiAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiIChjbGljayk9XCJjbG9zZSgpXCI+XG4gICAgPC9idXR0b24+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgPG5neC1kcm9wem9uZSBbbXVsdGlwbGVdPVwibXVsdGlwbGVcIlxuICAgICAgICAgICAgICAgICAgW2FjY2VwdF09XCJhY2NlcHRcIlxuICAgICAgICAgICAgICAgICAgW21heEZpbGVTaXplXT1cIm1heEZpbGVTaXplSW5CeXRlc1wiXG4gICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cIm9uU2VsZWN0KCRldmVudClcIj4gICAgICAgIFxuICAgICAgICA8bmd4LWRyb3B6b25lLWxhYmVsPkRyb3AgYSBmaWxlPC9uZ3gtZHJvcHpvbmUtbGFiZWw+XG4gICAgICAgIDxuZ3gtZHJvcHpvbmUtcHJldmlldyAqbmdGb3I9XCJsZXQgZiBvZiBpdGVtc1wiIFtyZW1vdmFibGVdPVwidHJ1ZVwiIChyZW1vdmVkKT1cIm9uUmVtb3ZlKGYpXCI+XG5cdCAgICA8bmd4LWRyb3B6b25lLWxhYmVsPnt7IGYubmFtZSB9fSAoe3sgZi50eXBlIH19KTwvbmd4LWRyb3B6b25lLWxhYmVsPlxuICAgICAgICA8L25neC1kcm9wem9uZS1wcmV2aWV3PlxuICAgIDwvbmd4LWRyb3B6b25lPlxuPC9kaXY+XG5cbjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgKGNsaWNrKT1cImNsb3NlKClcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgKGNsaWNrKT1cImNvbmZpcm0oKVwiIFtkaXNhYmxlZF09XCIhdmFsaWRcIj5cbiAgICAgICAgPGZhLWljb24gW2ljb25dPVwiZmFTYXZlXCIgY2xhc3M9XCJtZS0xXCI+PC9mYS1pY29uPiA8c3Bhbj5Db25maXJtPC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuPC9kaXY+XG4iXX0=